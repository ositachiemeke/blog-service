# Seeders

We use `sequilize` as a 3rd party library to manage the db changes

## How to create a seed script

- run `npx sequelize-cli seed:generate --name [name_of_the_migration_file]`
- go to `/src/database/seeders` and see the latest seed file created
- add you seed command into the file

The file generated by the command above should have the following format `XXXXXXXXXXXXXX-create-user.js`

## Seed template

When you run the command the generate a seed file this is the content that should be generated:

```js
"use strict";

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    /**
     * Add seed commands here.
     *
     * Example:
     * await queryInterface.bulkInsert('People', [{
     *   name: 'John Doe',
     *   isBetaMember: false
     * }], {});
     */
  },

  async down(queryInterface, Sequelize) {
    /**
     * Add commands to revert seed here.
     *
     * Example:
     * await queryInterface.bulkDelete('People', null, {});
     */
  }
};
```

## How to run the seed

There are 3 commands in the `package.json` to run the seeds, revert the last seed or revert all

- `npm run seed:all`
- `npm run see:undo`
- `npm run seed:undo:all`

## Links

[Sequelize documentation](https://sequelize.org/docs/v6/)
[Sequelize Seeds](https://sequelize.org/docs/v6/other-topics/migrations/)
[QueryInterface object](https://sequelize.org/api/v6/class/src/dialects/abstract/query-interface.js~queryinterface)
